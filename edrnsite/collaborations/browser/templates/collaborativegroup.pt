<html xmlns='http://www.w3.org/1999/xhtml'
    xml:lang='en'
    lang='en'
    xmlns:tal='http://xml.zope.org/namespaces/tal'
    xmlns:metal='http://xml.zope.org/namespaces/metal'
    xmlns:i18n='http://xml.zope.org/namespaces/i18n'
    metal:use-macro='context/main_template/macros/master'
    i18n:domain='edrnsite.collaborations'>
    <head>
        <title>Collaborative Group</title>
    </head>
    <body>
        <metal:main fill-slot='main'>
            <tal:main-macro metal:define-macro='main'
                tal:define='
                    site_properties context/portal_properties/site_properties;
                    descLength      site_properties/search_results_description_length;
                    descEllipsis    site_properties/ellipsis;
                    hereURL         context/@@plone_context_state/object_url;
                '>
                <div class='collaborativeGroupContainer'>
                    <div class='cbInfoBox'>
                        <div tal:replace='structure provider:plone.abovecontenttitle' />
                        <div class='socialMediaButtons'>
                            <a href='#' class='facebook' title='Share on Facebook' tal:attributes='href view/facebookURL'
                                i18n:translate='edrnsiteCollaborationsShareFacebookContent'
                                i18n:attributes='title edrnsiteCollaborationsShareFacebookTitle'>
                                Share on Facebook
                            </a>
                            <a href='#' class='twitter' title='Share on Twitter' tal:attributes='href view/twitterURL'
                                i18n:translate='edrnsiteCollaborationsShareTwitterContent'
                                i18n:attributes='title edrnsiteCollaborationsShareTwitterTitle'>
                                Share on Twitter
                            </a>
                        </div>
                        <h1 class='documentFirstHeading'> 
                            <metal:field use-macro='python:context.widget("title", mode="view")'>
                                Mega Awesome Group
                            </metal:field>
                        </h1>
                        <!-- Hide byline: <div tal:replace='structure provider:plone.belowcontenttitle' /> -->
                        <p class='documentDescription'>
                            <metal:field use-macro='python:context.widget("description", mode="view")'>Description.</metal:field>
                        </p>
                        <div tal:replace='structure provider:plone.abovecontentbody' />
                    </div>

                    <div class='cbMemberBox' tal:define='membersColumns view/membersColumns'>
                        <h2 i18n:translate='edrnsiteCollaborationsHeadingMembers'>Members</h2>
                        <div class='membersColumn' tal:repeat='members membersColumns'>
                            <div metal:use-macro='context/@@collaborativeGroupMacros/macros/columnOfCollaborativeGroupMembers'>
                                A column of members appears here.
                            </div>
                        </div>
                        <div class='visualClear'><!-- --></div>
                    </div>

                </div>
                <div class='collaborativeGroupContainer' tal:define='numTops view/numTops;'>
                    <dl id='collabGroupDetails' class='enableFormTabbing'>
                        <dt id='fieldsetlegend-overview' i18n:translate='edrnsiteCollaborationsTabOverview'>
                            Overview
                        </dt>
                        <dd id='fieldset-overview'>
                            <div class='topCollabGroupItems'
                                tal:define='topBiomarkers view/topBiomarkers; numBiomarkers view/numBiomarkers;'>
                                <h2 i18n:translate='edrnsiteCollaborationsHeadingBiomarkers' class='cbBiomarkersHeading'>
                                    Biomarkers
                                </h2>
                                <p class='topCollabGroupItemDescription' i18n:translate='edrnsiteCollaborationsDescBiomarkers'>
                                    Biomarkers under study by the
                                    <span i18n:name='groupName' tal:content='context/title'>Mega Awesome Group</span>.
                                </p>
                                <span class='discreet' i18n:translate='edrnsiteCollaborationsNoTopBiomarkers'
                                    tal:condition='not:topBiomarkers'>
                                    This collaborative group doesn't have any biomarkers.
                                </span>
                                <table tal:condition='topBiomarkers'>
                                    <tr tal:repeat='topBiomarker topBiomarkers'>
                                        <td>
                                            <a href='#' title='A way cool biomarker.' tal:content='topBiomarker/title'
                                                tal:attributes='href topBiomarker/absolute_url; title topBiomarker/description;'>
                                                Top Biomarker of Coolness
                                            </a>
                                        </td>
                                        <td>
                                            <span tal:replace='topBiomarker/biomarkerKind'>Sticky</span>,
                                            <span tal:replace='topBiomarker/qaState'>under review</span>
                                        </td>
                                    </tr>
                                </table>
                                <a href='#' tal:condition='python:numBiomarkers &gt; numTops' class='viewMoreEDRNStuffLink'
                                    tal:attributes='href string:${hereURL}/#fieldsetlegend-biomarkers'
                                    i18n:translate='edrnsiteCollaborationsViewMoreBiomarkers'>
                                    View all <span tal:replace='numBiomarkers' i18n:name='numBiomarkers'>42</span> biomarkers
                                </a>
                            </div>
                            <div class='topCollabGroupItems'
                                tal:define='topProtocols view/topProtocols; numProtocols view/numProtocols;'>
                                <h2 i18n:translate='edrnsiteCollaborationsHeadingProtocols' class='cbProtocolsHeading'>
                                    Protocols
                                </h2>
                                <p class='topCollabGroupItemDescription' i18n:translate='edrnsiteCollaborationsDescProtocols'>
                                    Protocols being executed by the
                                    <span i18n:name='groupName' tal:content='context/title'>Mega Awesome Group</span>.
                                </p>
                                <span class='discreet' i18n:translate='edrnsiteCollaborationsNoTopProtocols'
                                    tal:condition='not:topProtocols'>
                                    This collaborative group doesn't have any protocols.
                                </span>
                                <table tal:condition='topProtocols'>
                                    <tr tal:repeat='topProtocol topProtocols'>
                                        <td>
                                            <a href='#' title='A way interesting protocol.' tal:content='topProtocol/title'
                                                tal:attributes='href topProtocol/absolute_url; title topProtocol/description;'>
                                                Top Protocol of Fairly Interestingness.
                                            </a>
                                        </td>
                                    </tr>
                                </table>
                                <a href='#' tal:condition='python:numProtocols &gt; numTops' class='viewMoreEDRNStuffLink'
                                    tal:attributes='href string:${hereURL}/#fieldsetlegend-protocols'
                                    i18n:translate='edrnsiteCollaborationsTabProtocols'>
                                    View all <span tal:replace='numProtocols' i18n:name='numProtocols'>42</span> protocols
                                </a>
                            </div>
                            <div class='visualClear'><!-- --></div>
                        </dd>
                        <dt id='fieldsetlegend-biomarkers' i18n:translate='edrnsiteCollaborationsTabBiomarkers'>
                            Biomarkers
                        </dt>
                        <dd id='fieldset-biomarkers' tal:define='biomarkers context/biomarkers'>
                            <p class='discreet' tal:condition='not:biomarkers'
                                i18n:translate='edrnsiteCollaborationsAdmonitionNoBiomarkers'>
                                There are currently no biomarkers defined for this collaborative group.
                            </p>
                            <dl tal:condition='biomarkers' class='collabDetailList'>
                                <tal:repeat repeat='biomarker biomarkers'>
                                    <dt>
                                        <a href='#' tal:attributes='href biomarker/absolute_url' tal:content='biomarker/title'>
                                            An Advanced Biomarker Indicating Advanced Diseases
                                        </a>
                                    </dt>
                                    <dd tal:content='python:plone_view.cropText(biomarker.description, descLength, descEllipsis)'>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                                    </dd>
                                </tal:repeat>
                            </dl>
                        </dd>
                        <dt id='fieldsetlegend-protocols' i18n:translate='edrnsiteCollaborationsTabProtocols'>
                            Projects/Protocols
                        </dt>
                        <dd id='fieldset-protocols' tal:define='
                            protocols   context/protocols;
                            projects    context/projects;
                        '>
                            <h3 i18n:translate='Projects'>Projects</h3>
                            <p class='discreet' tal:condition='not:projects'
                                i18n:translate='edrnsiteCollaborationsAdmonitionNoProjects'>
                                There are currently no projects of which this group is a part.
                            </p>
                            <dl tal:condition='projects' class='collabDetailList'>
                                <tal:repeat repeat='project projects'>
                                    <dt>
                                        <a href='#' tal:attributes='href project/absolute_url' tal:content='project/title'>
                                            Super Aqua Team Hunger Force
                                        </a>
                                    </dt>
                                    <dd tal:content='python:plone_view.cropText(project.description, descLength, descEllipsis)'>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                                    </dd>
                                </tal:repeat>
                            </dl>
                            <h3 i18n:translate='Protocols'>Protocols</h3>
                            <p class='discreet' tal:condition='not:protocols'
                                i18n:translate='edrnsiteCollaborationsAdmonitionNoProtocols'>
                                There are currently no protocols defined for this collaborative group.
                            </p>
                            <dl tal:condition='protocols' class='collabDetailList'>
                                <tal:repeat repeat='protocol protocols'>
                                    <dt>
                                        <a href='#' tal:attributes='href protocol/absolute_url' tal:content='protocol/title'>
                                            An Advanced Protocol for the Study of Advanced Protocols
                                        </a>
                                    </dt>
                                    <dd tal:content='python:plone_view.cropText(protocol.description, descLength, descEllipsis)'>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                                    </dd>
                                </tal:repeat>
                            </dl>
                        </dd>
                        <dt id='fieldsetlegend-data' i18n:translate='edrnsiteCollaborationsTabData'>
                            Data
                        </dt>
                        <dd id='fieldset-data' tal:define='datasets context/datasets'>
                            <p class='discreet' tal:condition='not:datasets'
                                i18n:translate='edrnsiteCollaborationsAdmonitionNoDatasets'>
                                There are currently no datasets defined for this collaborative group.
                            </p>
                            <dl tal:condition='datasets' class='collabDetailList'>
                                <tal:repeat repeat='dataset datasets'>
                                    <dt>
                                        <a href='#' tal:attributes='href dataset/absolute_url' tal:content='dataset/title'>
                                            A Massive Dataset Capturing Some Fecal Biomarker Residue
                                        </a>
                                    </dt>
                                    <dd tal:content='python:plone_view.cropText(dataset.description, descLength, descEllipsis)'>
                                        Lorem ipsum dolor sit amet, consectetur adipisicing elit.
                                    </dd>
                                </tal:repeat>
                            </dl>
                        </dd>
                        <dt id='fieldsetlegend-calendar' i18n:translate='edrnsiteCollaborationsTabCalendar'>
                            Calendar
                        </dt>
                        <dd id='fieldset-calendar'>
                            Calendar TBD.
                        </dd>
                        <dt id='fieldsetlegend-documents' i18n:translate='edrnsiteCollaborationsTabDocuments'>
                            Documents
                        </dt>
                        <dd id='fieldset-documents' tal:define='
                            showFileButton  python:view.showNewButton("file");
                            showImageButton python:view.showNewButton("image");
                            showPageButton  python:view.showNewButton("page");
                            showButtons     python:showFileButton or showImageButton or showPageButton;
                        '>


<!-- Duplicate tabular listing from Plone's folder_tabular_view, but with "test" calls replaced with Python and-or tricks -->
        <metal:block use-macro="context/folder_listing/macros/content-core">
            <metal:entries fill-slot="entries">

            <div metal:use-macro="context/batch_macros/macros/navigation" />

            <table class="listing"
                   summary="Content listing"
                   i18n:attributes="summary summary_content_listing;">
                <thead>
                    <tr>
                        <th class="nosort">&nbsp;<tal:title i18n:translate="listingheader_title"
                          >Title</tal:title>&nbsp;</th>
                        <th class="nosort"
                            tal:condition="show_about">&nbsp;<tal:title i18n:translate="listingheader_author"
                          >Author</tal:title>&nbsp;</th>
                        <th class="nosort">&nbsp;<tal:title i18n:translate="listingheader_type"
                          >Type</tal:title>&nbsp;</th>
                        <th class="nosort"
                            tal:condition="show_about">&nbsp;<tal:modified i18n:translate="listingheader_modified"
                          >Modified</tal:modified>&nbsp;</th>
                    </tr>
                </thead>

                <tbody>
                    <metal:block use-macro="context/folder_listing/macros/entries">
                        <metal:entry fill-slot="entry">

                    <tr metal:define-macro="listitem"
                        tal:define="oddrow repeat/item/odd;"
                        tal:attributes="class python:oddrow is True and 'even' or 'odd'">

                            <td>
                                <img width="16" height="16"
                                     src="" alt=""
                                     tal:condition="item_icon/url"
                                     tal:attributes="src item_icon/url;
                                                     alt item_icon/description;
                                                     title item_icon/title;
                                                     width item_icon/width;
                                                     height item_icon/height;" />
                                <a href="#"
                                   tal:attributes="href python:(item_type in use_view_action) and (item_url+'/view') or item_url;
                                                   class string:$item_wf_state_class $item_type_class;
                                                   title item_description;"
                                   tal:content="item_title_or_id">
                                    Item Title
                                </a>
                            </td>

                            <td tal:condition="show_about">
                                <tal:name tal:condition="item_creator"
                                  tal:define="author python:pas_member.info(item_creator)">
                                <a href="#"
                                   tal:attributes="href string:${navigation_root_url}/author/${item_creator}"
                                   tal:content="author/name_or_id"
                                   tal:omit-tag="not:author">
                                  Bob Dobalina
                                </a>
                                </tal:name>
                            </td>

                            <td tal:content="item_type_title"
                                i18n:translate="">
                                Page
                            </td>

                        <td tal:condition="show_about"
                            tal:content="python:toLocalizedTime(item_modified,long_format=1)">
                          August 16, 2001 at 23:35:59
                        </td>

                    </tr>

                        </metal:entry>
                    </metal:block>
                </tbody>
            </table>

            </metal:entries>
        </metal:block>
<!-- End tabular listing from Plone's folder_tabular_view, but with "test" calls replaced with Python and-or tricks -->


                            <ul class='collaborationsNewContentButtons' tal:condition='showButtons'>
                                <li tal:condition='showPageButton'>
                                    <a href='#' title='Creates a new wiki page to be shared by the group.'
                                        i18n:attributes='title' i18n:translate='edrnsiteCollaborationsButtonsNewPage'
                                        tal:attributes='href python:view.newButtonLink("page");'>
                                        New Page
                                    </a>
                                </li>
                                <li tal:condition='showFileButton'>
                                    <a href='#' title='Uploads a new file (PDF, spreadsheet, Microsoft Word, zip…) to the group.'
                                        i18n:attributes='title' i18n:translate='edrnsiteCollaborationsButtonsNewFile'
                                        tal:attributes='href python:view.newButtonLink("file");'>
                                        New File
                                    </a>
                                </li>
                                <li tal:condition='showImageButton'>
                                    <a href='#' title='Uploads a new image (photograph, JPEG, PNG, GIF…) to the group.'
                                        i18n:attributes='title' i18n:translate='edrnsiteCollaborationsButtonsNewImage'
                                        tal:attributes='href python:view.newButtonLink("image");'>
                                        New Image
                                    </a>
                                </li>
                            </ul>
                        </dd>
                    </dl>
                </div>
                <div class='visualClear'><!-- --></div>
                <div metal:use-macro='context/document_relateditems/macros/relatedItems'>
                    Any related items
                </div>
                <div tal:replace='structure provider:plone.belowcontentbody' />
            </tal:main-macro>
        </metal:main>
        <metal:top-slot fill-slot='top_slot' tal:define='disable_column_two python:request.set("disable_plone.rightcolumn", 1);' />
        <!-- <metal:content-title fill-slot='content-title'>
            <h1 class='documentFirstHeading' tal:content='context/title'></h1>
        </metal:content-title>
        <metal:content-description fill-slot='content-description'>
            <p class='documentDescription' tal:content='context/description'></p>
        </metal:content-description> -->
        <!-- <metal:content-core fill-slot='content-core'>
            Core.
        </metal:content-core> -->
        <metal:css fill-slot='css_slot'>
            <style type='text/css' media='all'
                tal:content="string:@import url(${context/++resource++edrnsite-collaborations.css});"></style>
        </metal:css>
    </body>
</html>
